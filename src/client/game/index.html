<!DOCTYPE html>
<!-- @@root -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Ironbane MMO</title>

    <!-- we need to base at other than root -->
    <base href="game/" />

    <link rel="stylesheet" type="text/css" href="css/ironbane.css">

    <script src="/lib/jquery-2.0.0.min.js"></script>
    <script src="/lib/angular-1.1.4/angular.min.js"></script>

    <script src="/socket.io/socket.io.js"></script>

    <script>
        var socket = io.connect();
        socket.on('news', function (data) {
            console.log(data);
        });

        socket.on('chatMessage', function(msg) {
            $('#chatbox').append($('<li>' + msg.message + '</li>'));
        });

        var IronbaneGame = angular.module('IronbaneGame', []);

        IronbaneGame.controller('testCtrl', function($scope) {
            $scope.sayIt = function() {
                socket.emit('chatMessage', $scope.say);
            };

            $scope.login = function() {
                socket.emit('connectServer', {username: $scope.user.username, password: $scope.user.password}, function(response) {
                    console.log('response: ', response, 'socket: ', socket);
                });
            };
        });
    </script>
</head>
<body ng-app="IronbaneGame" ng-controller="testCtrl">
    <ul id="chatbox"></ul>
    <form name="chatForm" ng-submit="sayIt()">
        <input type="text" name="say" ng-model="say" /><button>Say</button>
    </form>
    <form name="loginForm" ng-submit="login()">
        <input type="text" name="username" ng-model="user.username" />
        <input type="text" name="password" ng-model="user.password" />
        <button>Login</button>
    </form>
</body>
</html>